From ff33f38bea4333cdd14840810185bb0fe9cdfec1 Mon Sep 17 00:00:00 2001
From: Julian Bouzas <julian.bouzas@collabora.com>
Date: Fri, 14 Jun 2024 12:19:24 -0400
Subject: [PATCH 3/4] rescan: Merge filters metadata changed hook with
 rescan-trigger

---
 src/scripts/linking/rescan.lua | 11 +----------
 1 file changed, 1 insertion(+), 10 deletions(-)

diff --git a/src/scripts/linking/rescan.lua b/src/scripts/linking/rescan.lua
index a49ad29e..bdc01268 100644
--- a/src/scripts/linking/rescan.lua
+++ b/src/scripts/linking/rescan.lua
@@ -185,16 +185,7 @@ SimpleEventHook {
       Constraint { "event.subject.key", "c", "default.audio.source",
           "default.audio.sink", "default.video.source" },
     },
-  },
-  execute = function (event)
-    local source = event:get_source ()
-    source:call ("schedule-rescan", "linking")
-  end
-}:register ()
-
-SimpleEventHook {
-  name = "linking/rescan-trigger-on-filters-metadata-changed",
-  interests = {
+    -- on any "filters" metadata changed
     EventInterest {
       Constraint { "event.type", "=", "metadata-changed" },
       Constraint { "metadata.name", "=", "filters" },
-- 
2.39.2

